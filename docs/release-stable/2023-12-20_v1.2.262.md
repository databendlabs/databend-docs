---
title: v1.2.262
tag: v1.2.262
draft: false
prerelease: false
author: everpcpc
created: 2023-12-19T11:46:41Z
published: 2023-12-20T02:15:31Z
url: https://github.com/databendlabs/databend/releases/tag/v1.2.262
---

<!-- Release notes generated using configuration in .github/release.yml at 37e04b9922ead3f87d7038518e4153f4284b5247 -->

## What's Changed

### Exciting New Features âœ¨

- feat: auto enable change tracking when create stream by @zhyass in [#13858](https://github.com/databendlabs/databend/pull/13858)
- feat: support qualify clause by @ariesdevil in [#13829](https://github.com/databendlabs/databend/pull/13829)
- feat: matched only and insert only pipeline separate by @JackTan25 in [#13680](https://github.com/databendlabs/databend/pull/13680)
- feat: Load credential while role_arn has been specified by @Xuanwo in [#13875](https://github.com/databendlabs/databend/pull/13875)
- feat(query): support take_ranges by @Dousir9 in [#13878](https://github.com/databendlabs/databend/pull/13878)
- feat: add json_path_match & @?,@@ operators by @akoshchiy in [#13906](https://github.com/databendlabs/databend/pull/13906)
- feat: add merge status by @JackTan25 in [#13903](https://github.com/databendlabs/databend/pull/13903)
- feat: support connection in stage related infer_schema by @guojidan in [#13890](https://github.com/databendlabs/databend/pull/13890)
- feat: iceberg table engine. by @youngsofun in [#13835](https://github.com/databendlabs/databend/pull/13835)
- feat(query): add TransformFilter by @Dousir9 in [#13922](https://github.com/databendlabs/databend/pull/13922)
- feat: mask admon_key_id && secret_access_key by @guojidan in [#13916](https://github.com/databendlabs/databend/pull/13916)
- feat(query): Add warnings in the query response by @flaneur2020 in [#13918](https://github.com/databendlabs/databend/pull/13918)
- feat: Try to use volo thrift for async support by @Xuanwo in [#13921](https://github.com/databendlabs/databend/pull/13921)
- feat(cluster): support compression for query flight data by @zhang2014 in [#13934](https://github.com/databendlabs/databend/pull/13934)
- feat(planner): support timeout termination for query optimization by @leiysky in [#13955](https://github.com/databendlabs/databend/pull/13955)
- feat: add internal stream columns by @zhyass in [#13960](https://github.com/databendlabs/databend/pull/13960)
- feat: add table engine delta. by @youngsofun in [#13949](https://github.com/databendlabs/databend/pull/13949)
- feat: add new processor `TransformSortSpill` to handle external sort. by @RinChanNOWWW in [#13938](https://github.com/databendlabs/databend/pull/13938)
- feat: add kill query when extend lock failure by @zhyass in [#13980](https://github.com/databendlabs/databend/pull/13980)
- feat(executor): support output query plan profiles to logs by @zhang2014 in [#13945](https://github.com/databendlabs/databend/pull/13945)
- feat(query): add config for query profile log by @everpcpc in [#13987](https://github.com/databendlabs/databend/pull/13987)
- feat: enable sort spilling when memory reach the limit. by @RinChanNOWWW in [#13989](https://github.com/databendlabs/databend/pull/13989)
- feat: support maximum check by @guojidan in [#13992](https://github.com/databendlabs/databend/pull/13992)
- feat(meta): support use id get table/db_name by @TCeason in [#14006](https://github.com/databendlabs/databend/pull/14006)
- feat: show locks by @zhyass in [#14004](https://github.com/databendlabs/databend/pull/14004)
- feat(query): Support enable hook to refresh virtual column after insert by @b41sh in [#13983](https://github.com/databendlabs/databend/pull/13983)
- feat: add setting to disable clickhouse handler by @guojidan in [#13965](https://github.com/databendlabs/databend/pull/13965)
- feat: rotating logs by @yufan022 in [#14008](https://github.com/databendlabs/databend/pull/14008)
- feat(planner): Eliminate unnecessary sort by @leiysky in [#14023](https://github.com/databendlabs/databend/pull/14023)
- feat: add column create_on for stages table by @everpcpc in [#14017](https://github.com/databendlabs/databend/pull/14017)
- feat: Introduced `MetaSpec` for setting relative expiration by @drmingdrmer in [#14041](https://github.com/databendlabs/databend/pull/14041)
- feat(query): add decimal round/truncate/ceil/floor function by @sundy-li in [#14040](https://github.com/databendlabs/databend/pull/14040)
- feat: add range for show settings by @guojidan in [#14049](https://github.com/databendlabs/databend/pull/14049)
- feat(query): Support show virtual columns by @b41sh in [#14038](https://github.com/databendlabs/databend/pull/14038)

### Thoughtful Bug Fix ðŸ”§

- fix: filter logs from other modules by @everpcpc in [#13861](https://github.com/databendlabs/databend/pull/13861)
- fix: fix lower_case by @JackTan25 in [#13854](https://github.com/databendlabs/databend/pull/13854)
- fix(cluster): close output port when bucket work finished by @zhang2014 in [#13870](https://github.com/databendlabs/databend/pull/13870)
- fix: fix avg for decimal type by @ariesdevil in [#13877](https://github.com/databendlabs/databend/pull/13877)
- fix(query): Skip checking the privilege about the user stage @~ by @flaneur2020 in [#13823](https://github.com/databendlabs/databend/pull/13823)
- fix: resolve flight connection leak by @dantengsky in [#13866](https://github.com/databendlabs/databend/pull/13866)
- fix: remove merge into lock by @JackTan25 in [#13897](https://github.com/databendlabs/databend/pull/13897)
- fix: add visit for merge into/update/replace/insert/delete/copy statement by @JackTan25 in [#13848](https://github.com/databendlabs/databend/pull/13848)
- fix(query): fix check join condition with aggregate and window functions by @b41sh in [#13879](https://github.com/databendlabs/databend/pull/13879)
- fix: Fix source optimized without enable distributed but in clusters environment by @JackTan25 in [#13910](https://github.com/databendlabs/databend/pull/13910)
- fix(query): add some dml prvilege check by @TCeason in [#13845](https://github.com/databendlabs/databend/pull/13845)
- fix: max_active_session does not work for http handler. by @youngsofun in [#13931](https://github.com/databendlabs/databend/pull/13931)
- fix: wrong use `size_hint` in `concat_columns` by @xudong963 in [#13936](https://github.com/databendlabs/databend/pull/13936)
- fix: make build and probe hash method consistent in spill by @xudong963 in [#13942](https://github.com/databendlabs/databend/pull/13942)
- fix(query): fix create table tuple default value painc by @b41sh in [#13946](https://github.com/databendlabs/databend/pull/13946)
- fix: fix non-null constraint by @JackTan25 in [#13939](https://github.com/databendlabs/databend/pull/13939)
- fix: build release warning by @xudong963 in [#13954](https://github.com/databendlabs/databend/pull/13954)
- fix(query): ignore ascii case for flight compression setting by @zhang2014 in [#13957](https://github.com/databendlabs/databend/pull/13957)
- fix(query): avoid SHOW TABLES failure by @flaneur2020 in [#13982](https://github.com/databendlabs/databend/pull/13982)
- fix(query): fix count all in lambda function by @b41sh in [#13991](https://github.com/databendlabs/databend/pull/13991)
- fix(query): fix incorrect function name of decimal, neq --> noteq by @sundy-li in [#14001](https://github.com/databendlabs/databend/pull/14001)
- fix: add better explain for merge into by @JackTan25 in [#14005](https://github.com/databendlabs/databend/pull/14005)
- fix: query flight rpc connection leaking by @dantengsky in [#13956](https://github.com/databendlabs/databend/pull/13956)
- fix: fix enable_refresh_virtual_column_after_write range by @BohuTANG in [#14009](https://github.com/databendlabs/databend/pull/14009)
- fix: remove update expr cast early, use cast after all macthed operations by @JackTan25 in [#14037](https://github.com/databendlabs/databend/pull/14037)
- fix: incorrect stats when auto-compaction is hooked by @dantengsky in [#14042](https://github.com/databendlabs/databend/pull/14042)
- fix: multiple otlp loggers conflict by @everpcpc in [#14050](https://github.com/databendlabs/databend/pull/14050)
- fix: abort vacuum if there are io execption by @dantengsky in [#14052](https://github.com/databendlabs/databend/pull/14052)
- fix: treat change$\* as internal columns by @dantengsky in [#14061](https://github.com/databendlabs/databend/pull/14061)
- fix: fix get db without DbIdList key by @lichuang in [#14059](https://github.com/databendlabs/databend/pull/14059)
- fix(query): add missing server_version for query log by @everpcpc in [#14074](https://github.com/databendlabs/databend/pull/14074)
- fix(query): fix panic when drop UncompressedBuffer by @zhang2014 in [#14068](https://github.com/databendlabs/databend/pull/14068)

### Code Refactor ðŸŽ‰

- refactor: auto split large append-entries RPC by @drmingdrmer in [#13857](https://github.com/databendlabs/databend/pull/13857)
- refactor: abstract `TransformSortMergeBase` to unify merge sort logic. by @RinChanNOWWW in [#13927](https://github.com/databendlabs/databend/pull/13927)
- refactor: optimize read of small row group in parquet by @zenus in [#13530](https://github.com/databendlabs/databend/pull/13530)
- refactor: use LazyLock to replace lazy_static crate by @PsiACE in [#13943](https://github.com/databendlabs/databend/pull/13943)
- refactor(query): prune unused flatten result columns by @b41sh in [#13935](https://github.com/databendlabs/databend/pull/13935)
- refactor: use LazyLock to replace once_cell::sync::Lazy by @PsiACE in [#13952](https://github.com/databendlabs/databend/pull/13952)
- refactor: runtime filter by @xudong963 in [#13842](https://github.com/databendlabs/databend/pull/13842)
- refactor: access KVMeta with methods instead of field by @drmingdrmer in [#14013](https://github.com/databendlabs/databend/pull/14013)
- refactor: normalize internal crate names by @everpcpc in [#14039](https://github.com/databendlabs/databend/pull/14039)
- refactor: using borsh instead of bincode for serde agg function state by @ariesdevil in [#13997](https://github.com/databendlabs/databend/pull/13997)
- refactor: abstract a common merger to do merge sort. by @RinChanNOWWW in [#14020](https://github.com/databendlabs/databend/pull/14020)

### Build/Testing/CI Infra Changes ðŸ”Œ

- ci: format test not dep on clickhouse handler. by @youngsofun in [#14036](https://github.com/databendlabs/databend/pull/14036)

### Others ðŸ“’

- chore: utilize Visitor for ScalarExpr take 2 by @andylokandy in [#13833](https://github.com/databendlabs/databend/pull/13833)
- chore(query): add columns expression which expand star column select target by @sundy-li in [#13850](https://github.com/databendlabs/databend/pull/13850)
- chore(query): support from first query by @sundy-li in [#13859](https://github.com/databendlabs/databend/pull/13859)
- chore: bump h3 from 0.3.0 to 0.4.0 by @ariesdevil in [#13874](https://github.com/databendlabs/databend/pull/13874)
- chore(cluster): only dump once graph for slow dump by @zhang2014 in [#13880](https://github.com/databendlabs/databend/pull/13880)
- chore: add decimal type agg stddev support by @lichuang in [#13864](https://github.com/databendlabs/databend/pull/13864)
- chore: improve explain insert into with select by @xudong963 in [#13876](https://github.com/databendlabs/databend/pull/13876)
- chore: remove ck client in sqllogictest by @xudong963 in [#13882](https://github.com/databendlabs/databend/pull/13882)
- chore: change stream logic by @zhyass in [#13808](https://github.com/databendlabs/databend/pull/13808)
- chore(query): rename enable_stage_udf_priv_check by @TCeason in [#13863](https://github.com/databendlabs/databend/pull/13863)
- chore(planner): Refine explain output of statements by @leiysky in [#13888](https://github.com/databendlabs/databend/pull/13888)
- chore(query): add probe state for slow dump by @zhang2014 in [#13892](https://github.com/databendlabs/databend/pull/13892)
- chore(ci): adjust release changelog by @everpcpc in [#13895](https://github.com/databendlabs/databend/pull/13895)
- chore(query): add python style list comprehension by @sundy-li in [#13887](https://github.com/databendlabs/databend/pull/13887)
- chore: remove old runtime filter by @xudong963 in [#13896](https://github.com/databendlabs/databend/pull/13896)
- chore: new setting `create_rpc_client_with_current_rt` by @dantengsky in [#13898](https://github.com/databendlabs/databend/pull/13898)
- chore: change Result to Option to avoid bring error stack by @BohuTANG in [#13901](https://github.com/databendlabs/databend/pull/13901)
- chore: refine the unit test framework by @BohuTANG in [#13902](https://github.com/databendlabs/databend/pull/13902)
- chore: refactor unit test framework by @BohuTANG in [#13905](https://github.com/databendlabs/databend/pull/13905)
- chore(benchmark): insert result of Q0 for tpch by @everpcpc in [#13911](https://github.com/databendlabs/databend/pull/13911)
- chore(ci): install zig for dev setup by @everpcpc in [#13913](https://github.com/databendlabs/databend/pull/13913)
- chore(ci): fix install ziglang for debian by @everpcpc in [#13914](https://github.com/databendlabs/databend/pull/13914)
- chore(ci): install zig on centos by @everpcpc in [#13915](https://github.com/databendlabs/databend/pull/13915)
- chore(cluster): add allow_adjust_parallelism flag for cluster by @zhang2014 in [#13909](https://github.com/databendlabs/databend/pull/13909)
- chore: fix array() function parse error by @lichuang in [#13912](https://github.com/databendlabs/databend/pull/13912)
- chore: push down sort pipeline to cluster nodes. by @RinChanNOWWW in [#13881](https://github.com/databendlabs/databend/pull/13881)
- chore(ast): improve experiment dialect by @andylokandy in [#13923](https://github.com/databendlabs/databend/pull/13923)
- chore(query): remove extra error code construction by @sundy-li in [#13926](https://github.com/databendlabs/databend/pull/13926)
- chore(ci): fix install zig by @everpcpc in [#13933](https://github.com/databendlabs/databend/pull/13933)
- chore: fix generate_series to_timestamp step unit bug by @lichuang in [#13917](https://github.com/databendlabs/databend/pull/13917)
- chore: fix lag default arg bug by @lichuang in [#13937](https://github.com/databendlabs/databend/pull/13937)
- chore(ci): fix benchmark result for tpch by @everpcpc in [#13941](https://github.com/databendlabs/databend/pull/13941)
- chore(planner): merge into prune row_id if insert_only by @Dousir9 in [#13951](https://github.com/databendlabs/databend/pull/13951)
- chore: assert that pushdown columns must exist by @andylokandy in [#13228](https://github.com/databendlabs/databend/pull/13228)
- chore(ci): fix benchmark tpch result by @everpcpc in [#13958](https://github.com/databendlabs/databend/pull/13958)
- chore(planner): add tips for wrong usage of semi or anti join by @Dousir9 in [#13948](https://github.com/databendlabs/databend/pull/13948)
- chore: fix runtime ut to tokio::time::sleep in async by @BohuTANG in [#13963](https://github.com/databendlabs/databend/pull/13963)
- chore: bump tokio from 1.26.0 to 1.35.0 by @BohuTANG in [#13967](https://github.com/databendlabs/databend/pull/13967)
- chore: move crates deps to the root Cargo.toml by @BohuTANG in [#13969](https://github.com/databendlabs/databend/pull/13969)
- chore(query): refactor binder virtual column by @b41sh in [#13920](https://github.com/databendlabs/databend/pull/13920)
- chore: enable runtime filter for native datasource by @xudong963 in [#13976](https://github.com/databendlabs/databend/pull/13976)
- chore: bincode api to common/io by @BohuTANG in [#13973](https://github.com/databendlabs/databend/pull/13973)
- chore(planner): fix unexpected anti semi wrong table_index by @Dousir9 in [#13977](https://github.com/databendlabs/databend/pull/13977)
- chore(ci): workflow for stable release by @everpcpc in [#14003](https://github.com/databendlabs/databend/pull/14003)
- chore(ci): fix note for stable release by @everpcpc in [#14007](https://github.com/databendlabs/databend/pull/14007)
- chore(ci): only publish deb & python binding on stable release by @everpcpc in [#14015](https://github.com/databendlabs/databend/pull/14015)
- chore: fix drop_table_by_id fail when TableIdToName cannot found by @lichuang in [#14002](https://github.com/databendlabs/databend/pull/14002)
- chore(planner): minor refactor heuristic optimizer by @leiysky in [#14021](https://github.com/databendlabs/databend/pull/14021)
- chore: merge settings possible_values to range by @BohuTANG in [#14010](https://github.com/databendlabs/databend/pull/14010)
- chore: tmp remove clickhouse http handler test by @everpcpc in [#14032](https://github.com/databendlabs/databend/pull/14032)
- chore(deps): bump zerocopy from 0.6.1 to 0.6.6 by @dependabot in [#14031](https://github.com/databendlabs/databend/pull/14031)
- chore: fix test privilege access by @everpcpc in [#14034](https://github.com/databendlabs/databend/pull/14034)
- chore: move interpreter/\*\_hook.rs to hook/ by @BohuTANG in [#14044](https://github.com/databendlabs/databend/pull/14044)
- chore: simplify txn-op by @drmingdrmer in [#14048](https://github.com/databendlabs/databend/pull/14048)
- chore(executor): use null as root profile parent id by @zhang2014 in [#14051](https://github.com/databendlabs/databend/pull/14051)
- chore: reduce tpcds Q2 result set by @xudong963 in [#14055](https://github.com/databendlabs/databend/pull/14055)
- chore: update doc: since 1.2.258 `ttl` is supported by meta-service by @drmingdrmer in [#14058](https://github.com/databendlabs/databend/pull/14058)
- chore: fix license by @drmingdrmer in [#14060](https://github.com/databendlabs/databend/pull/14060)
- chore(tests): add explain for sync agg index by @ariesdevil in [#14053](https://github.com/databendlabs/databend/pull/14053)
- chore(query): refactor decimal scalar functions by @sundy-li in [#14057](https://github.com/databendlabs/databend/pull/14057)
- chore(executor): add exchange row and bytes profile by @zhang2014 in [#14067](https://github.com/databendlabs/databend/pull/14067)
- chore(query): refactor function params to be scalar by @sundy-li in [#14079](https://github.com/databendlabs/databend/pull/14079)
- chore: fix typo and refine the merge into status by @BohuTANG in [#14081](https://github.com/databendlabs/databend/pull/14081)

**Full Changelog**: https://github.com/databendlabs/databend/compare/v1.2.233...v1.2.262
