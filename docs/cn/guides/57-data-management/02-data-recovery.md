---
title: Databend Cloud 中的数据恢复
sidebar_label: 数据恢复
---

本主题介绍如何使用 Databend Cloud 恢复已更改或删除的数据。

## 时间回溯：轻松访问历史数据

通过 Databend 时间回溯，您可以回顾和检索过去的数据，即使数据已被更改或删除。它非常适合：

- **找回删除的数据：** 帮助您找回重要的东西，如表、数据库，无论是不小心还是有意删除的。

- **复制和保存过去的数据：** 允许您复制和保存早期时间的重要数据。

- **查看过去的数据使用情况：** 使查看数据在特定时间的使用或更改方式变得更容易。

### 时间回溯的主要用途

- **访问历史数据**：查看过去的数据，即使它已被更改或删除。
- **恢复丢失的数据**：使用 [FLASHBACK TABLE](/sql/sql-commands/ddl/table/flashback-table) 命令恢复已删除的表和数据库。

### 时间回溯 SQL 扩展

- **时间回溯的 SQL 扩展：** 在 SELECT 语句和 CREATE 命令中使用特殊的 SQL 子句，如 [`AT`](/sql/sql-commands/query-syntax/query-at)，以指定您想要访问的历史记录中的确切时间点。
- **恢复已删除的数据：** 对表和数据库使用 `UNDROP` 命令。

### 设置数据保留期

- **基础版**：选择不保留（0 天）或默认的 **1 天**。
- **商业版及更高版本**：
  - 对于临时数据：设置为 0 或默认的 **1 天**。
  - 对于永久数据：选择 **0 到 90 天** 之间的任何期限。

:::info Note

将保留期设置为 0 天意味着时间回溯将不适用于该数据。

:::

### 调整数据保留时间

使用 `DATA_RETENTION_TIME_IN_DAYS` 设置更改数据保留时间，通常为 1 天。这决定了旧数据的保留时间。

## Fail-safe：为您的数据提供额外保护

Databend Cloud 中的 Fail-safe 是一项额外的安全功能，与时间回溯不同。它旨在保护您的数据，以防系统问题或安全事件。

### Fail-safe 的工作原理

Fail-safe 在时间回溯期结束后提供固定的 7 天恢复窗口。

Fail-safe 包括：

- **MetaData 恢复：** 使用元服务中的版本控制来恢复已删除的表。
- **数据恢复：** 使用 AWS S3 的版本控制来保存已更改或删除的数据。

:::caution Attention

- Fail-safe 是一项紧急服务，不由用户配置，由 Databend Cloud 提供。
- 它应仅在其他恢复方法不起作用后使用。
- 不适用于超出时间回溯期的常规历史数据访问。
- 用于在出现重大问题后恢复数据，您无法自行设置。
- 恢复时间可能从几个小时到几天不等，具体取决于情况。

:::