---
title: Databend Cloud 中的数据恢复
sidebar_label: 数据恢复
---

本主题解释了如何使用 Databend Cloud 恢复已更改或删除的数据。

## 时间回溯：轻松访问历史数据

通过 Databend 时间回溯，您可以回顾并检索过去的数据，即使它已被更改或删除。它非常适合：

- **恢复已删除的数据：** 帮助您恢复重要内容，如被删除的表、数据库，无论是意外还是有意。

- **复制和保存历史数据：** 允许您复制和保存早期的重要数据。

- **查看历史数据使用情况：** 使您更容易查看数据在特定时间的使用或更改情况。

### 时间回溯的主要用途

- **访问历史数据：** 查看过去的数据，即使它已被更改或删除。
- **恢复丢失的数据：** 恢复被删除的表和数据库。

### 时间回溯 SQL 扩展

- **时间回溯 SQL 扩展：** 使用特殊的 SQL 子句，如 [`AT`](/sql/sql-commands/query-syntax/query-at) 在 SELECT 语句和 CREATE 命令中指定您想要访问的历史确切时间点。
- **恢复已删除的数据：** 使用 `UNDROP` 命令恢复表、数据库。

### 设置数据保留期限

- **基础版**：选择无保留（0 天）或默认的 **1 天**。
- **商业版及以上**：
  - 对于临时数据：设置为 0 或默认的 **1 天**。
  - 对于永久数据：选择从 **0 到 90 天**的任何期限。

:::info 注意

设置 0 天的保留期限意味着该数据的时间回溯将不可用。

:::

### 调整数据保留时间

使用 `DATA_RETENTION_TIME_IN_DAYS` 设置更改数据保留时间，通常为 1 天。这决定了保留旧数据的时间长度。

## 故障安全：为您的数据提供额外保护

Databend Cloud 中的故障安全是一项额外的安全功能，不同于时间回溯。它旨在在系统问题或安全事件发生时保护您的数据。

### 故障安全的工作原理

故障安全在时间回溯期结束后提供固定的 7 天恢复窗口。

故障安全包括：

- **元数据恢复：** 使用元服务中的版本控制来恢复已删除的表。
- **数据恢复：** 使用 AWS S3 的版本控制来保存已更改或删除的数据。

:::caution 注意

- 故障安全是一项应急服务，不是用户可配置的，由 Databend Cloud 提供。
- 它应在其他恢复方法无效时使用。
- 不适用于时间回溯期之外的常规历史数据访问。
- 用于在大问题后恢复数据，且您无法自行设置。
- 恢复时间可能从几小时到几天不等，具体取决于情况。

:::
