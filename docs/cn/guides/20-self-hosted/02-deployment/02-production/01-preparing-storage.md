---
title: 准备存储
sidebar_label: 准备存储
description: Databend 部署的存储准备建议。
---

本主题介绍在生产环境中部署 Databend 的推荐存储配置。

## AWS S3

在生产环境中使用 AWS S3 部署 Databend 时，请考虑以下建议：

### 安全性

阻止对 S3 Bucket 的公共访问，以防止未经授权访问您的数据。您可以配置以下设置来限制公共访问：

转到 AWS 管理控制台，选择 S3 服务，输入 Bucket 名称，然后单击**权限**选项卡。在**阻止公共访问**部分下，单击**编辑**，然后选择**阻止所有公共访问**选项，然后单击**保存**。

### 加密

在 S3 Bucket 上启用服务器端加密，以保护静态数据。您可以从以下加密选项中进行选择：

- **SSE-S3**：使用 Amazon S3 托管密钥的服务器端加密。
- **SSE-KMS**：使用 AWS Key Management Service (KMS) 密钥的服务器端加密。

转到 AWS 管理控制台，选择 S3 服务，输入 Bucket 名称，然后单击**属性**选项卡。在**默认加密**部分下，单击**编辑**，然后选择加密选项，然后单击**保存**。

### Bucket 版本控制

在 S3 Bucket 上启用版本控制，以防止意外删除对象。版本控制允许您从意外删除或覆盖中恢复对象。

转到 AWS 管理控制台，选择 S3 服务，输入 Bucket 名称，然后单击**属性**选项卡。在**版本控制**部分下，单击**编辑**，然后选择**启用版本控制**，然后单击**保存**。

### Bucket 生命周期策略

启用 Bucket 版本控制后，需要生命周期规则。您可以配置生命周期策略以自动删除旧版本的对象或将对象转换为不同的存储类别。

- 配置生命周期规则以删除旧版本的对象。

  1. 转到 AWS 管理控制台，选择 S3 服务，输入 Bucket 名称，然后单击**管理**选项卡。在**生命周期**部分下，单击**添加生命周期规则**以创建新规则。

  2. 输入规则名称，选择对象前缀，然后配置规则操作：**永久删除对象的非当前版本**。

  3. 输入对象变为非当前版本后的天数：建议 7 天。

  4. 输入要保留的版本数：建议 0。

  5. 单击**创建规则**以保存生命周期策略。

- 配置生命周期规则以清理过期的删除标记和未完成的多部分上传。

  1. 转到 AWS 管理控制台，选择 S3 服务，输入 Bucket 名称，然后单击**管理**选项卡。在**生命周期**部分下，单击**添加生命周期规则**以创建新规则。

  2. 输入规则名称，选择对象前缀，然后配置规则操作：**删除过期的对象删除标记或未完成的多部分上传**。

  3. 通过切换复选框启用两个选项：

     - **过期的对象删除标记**：删除过期对象的删除标记
     - **未完成的多部分上传**：在指定的天数后清理未完成的多部分上传

  4. 单击**创建规则**以保存生命周期策略。