---
title: 准备存储
sidebar_label: 准备存储
description:
  为 Databend 部署准备存储的推荐配置。
---

本主题介绍了在生产环境中部署 Databend 时推荐的存储配置。

## AWS S3

在生产环境中使用 AWS S3 部署 Databend 时，请考虑以下推荐配置：

### 安全性

阻止对您的 S3 存储桶的公共访问，以防止未经授权访问您的数据。您可以通过以下设置来限制公共访问：

进入 AWS 管理控制台，选择 S3 服务，输入存储桶名称，然后点击 **权限** 标签页。在 **阻止公共访问** 部分，点击 **编辑**，然后选择 **阻止所有公共访问** 选项并点击 **保存**。

### 加密

在您的 S3 存储桶上启用服务器端加密，以保护静态数据。您可以选择以下加密选项：

- **SSE-S3**：使用 Amazon S3 托管密钥的服务器端加密。
- **SSE-KMS**：使用 AWS Key Management Service (KMS) 密钥的服务器端加密。

进入 AWS 管理控制台，选择 S3 服务，输入存储桶名称，然后点击 **属性** 标签页。在 **默认加密** 部分，点击 **编辑**，然后选择加密选项并点击 **保存**。

### 存储桶版本控制

在您的 S3 存储桶上启用版本控制，以防止对象被意外删除。版本控制允许您从意外删除或覆盖中恢复对象。

进入 AWS 管理控制台，选择 S3 服务，输入存储桶名称，然后点击 **属性** 标签页。在 **版本控制** 部分，点击 **编辑**，然后选择 **启用版本控制** 并点击 **保存**。

### 存储桶生命周期策略

当启用存储桶版本控制时，需要配置生命周期规则。您可以配置生命周期策略，自动删除对象的旧版本或将对象转换到不同的存储类别。

1. 进入 AWS 管理控制台，选择 S3 服务，输入存储桶名称，然后点击 **管理** 标签页。在 **生命周期** 部分，点击 **添加生命周期规则** 以创建新规则。

2. 输入规则名称，选择对象前缀，并配置规则操作：**永久删除对象的非当前版本**。

3. 输入对象成为非当前版本后的天数：推荐 7 天。

4. 输入要保留的版本数量：推荐 0。

5. 点击 **创建规则** 以保存生命周期策略。