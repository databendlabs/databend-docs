---
title: 列出 Stage 中的文件
sidebar_position: 4
---

列出 Stage 中的文件。

另请参见：

- [LIST_STAGE](../../../20-sql-functions/17-table-functions/03-list-stage.md)：此函数列出 Stage 中的文件，并允许您根据文件扩展名过滤 Stage 中的文件，并获取每个文件的详细信息。
- [PRESIGN](presign.md)：Databend 推荐使用预签名 URL 方法将文件上传到 Stage。
- [从 Stage 中删除文件](05-ddl-remove-stage.md)。

## 语法

```sql
LIST { userStage | internalStage | externalStage } [ PATTERN = '<regex_pattern>' ]
```

## 示例

下面的 Stage 包含一个名为 **books.parquet** 的文件和一个名为 **2023** 的文件夹。

![Alt text](/img/sql/list-stage.png)

文件夹 **2023** 包含以下文件：

![Alt text](/img/sql/list-stage-2.png)

LIST 命令默认列出 Stage 中的所有文件：

```sql
LIST @my_internal_stage;
+-----------------+------+------------------------------------+-------------------------------+---------+
|      name       | size |                md5                 |         last_modified         | creator |
+-----------------+------+------------------------------------+-------------------------------+---------+
| 2023/meta.log   |  475 | "4208ff530b252236e14b3cd797abdfbd" | 2023-04-19 20:23:24.000 +0000 | NULL    |
| 2023/query.log  | 1348 | "1c6654b207472c277fc8c6207c035e18" | 2023-04-19 20:23:24.000 +0000 | NULL    |
| 2023/readme.txt | 1193 | "8c0fbbebfedf26f93324541f97f5ac14" | 2023-04-19 20:23:24.000 +0000 | NULL    |
| books.parquet   |  998 | "88432bf90aadb79073682988b39d461c" | 2023-04-19 20:08:42.000 +0000 | NULL    |
+-----------------+------+------------------------------------+-------------------------------+---------+
```

要列出文件夹 **2023** 中的文件，请运行以下命令：

:::note
在命令中的路径末尾添加斜杠 "/" 是必要的，否则命令可能无法按预期工作，并可能导致错误。
:::

```sql
LIST @my_internal_stage/2023/;
+-----------------+------+------------------------------------+-------------------------------+---------+
|      name       | size |                md5                 |         last_modified         | creator |
+-----------------+------+------------------------------------+-------------------------------+---------+
| 2023/meta.log   |  475 | "4208ff530b252236e14b3cd797abdfbd" | 2023-04-19 20:23:24.000 +0000 | NULL    |
| 2023/query.log  | 1348 | "1c6654b207472c277fc8c6207c035e18" | 2023-04-19 20:23:24.000 +0000 | NULL    |
| 2023/readme.txt | 1193 | "8c0fbbebfedf26f93324541f97f5ac14" | 2023-04-19 20:23:24.000 +0000 | NULL    |
+-----------------+------+------------------------------------+-------------------------------+---------+
```

要列出 Stage 中所有扩展名为 \*.log 的文件，请运行以下命令：

```sql
LIST @my_internal_stage PATTERN = '.log';
+----------------+------+------------------------------------+-------------------------------+---------+
|      name      | size |                md5                 |         last_modified         | creator |
+----------------+------+------------------------------------+-------------------------------+---------+
| 2023/meta.log  |  475 | "4208ff530b252236e14b3cd797abdfbd" | 2023-04-19 20:23:24.000 +0000 | NULL    |
| 2023/query.log | 1348 | "1c6654b207472c277fc8c6207c035e18" | 2023-04-19 20:23:24.000 +0000 | NULL    |
+----------------+------+------------------------------------+-------------------------------+---------+
```
